<canvas id="myCanvas" width="200" height="200" style="border:1px solid #000000;">
</canvas>
<script>
var connection = new WebSocket('ws://192.168.1.19:8888/ws');
connection.onmessage = function (e) {
  console.log('Server: ' + e.data);
};
connection.onopen = function () {
  connection.send('Ping'); // Send the message 'Ping' to the server
};
function getMousePos(canvas, evt) {
  var rect = canvas.getBoundingClientRect();
  return {
    x: evt.clientX - rect.left,
    y: evt.clientY - rect.top
  };
}
var c = document.getElementById("myCanvas");
c.addEventListener('mousemove', function(evt) {
  var mousePos = getMousePos(c, evt);
  var message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
  console.log(message);
}, false);
imgs=['test.png','testW.png','testW2.png','test180.png']
imgsLoaded=0
loadedImgs={}
for (s in imgs){
  var img = new Image();
  img.src=imgs[s];
  img.onload=function(){
    imgsLoaded++
    if (imgsLoaded==imgs.length)
      loop()
  };
  loadedImgs[imgs[s]]=img;
}
num=0
add=1
which=0
function loop(){
  var c = document.getElementById("myCanvas");
  var ctx = c.getContext("2d");
  ctx.clearRect(0, 0, c.width, c.height);
  ctx.beginPath();
  ctx.arc(95,50,40,0,2*Math.PI);
  ctx.stroke();
  ctx.drawImage(loadedImgs['test.png'],20,20,40,40,10,10,70,70);
  walks=['testW.png','testW2.png','test180.png']
  img=loadedImgs[walks[Math.floor(which/2)%walks.length]]
  w=64
  h=64
  ctx.drawImage(img,img.width/7*(num%6)+img.width/7/2-w/2,img.height/6*Math.floor(num/6)+img.height/6/2-h/2,w,h,30,30,130,130);
  num+=add
  if (num+1==35){
    add=-1
  }
  if (num-1==15){
    which++
    add=1
  }
  setTimeout(loop,30);
}
var ogg = new Audio('test.ogg');
//ogg.src="test.ogg";
//ogg.oncanplay=function(){
//ogg.oncanplaythrough=function(){
ogg.onloadeddata=function(){
  ogg.play();
}
</script>
